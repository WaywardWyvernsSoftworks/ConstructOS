{"version":3,"file":"index.js","sources":["../../electron/main/update.ts","../../electron/main/api/discord.ts","../../electron/main/api/pouchdb.ts","../../electron/main/api/fsapi.ts","../../electron/main/index.ts"],"sourcesContent":["import { app, ipcMain } from 'electron'\nimport {\n  type ProgressInfo,\n  type UpdateDownloadedEvent,\n  autoUpdater\n} from 'electron-updater'\n\nexport function update(win: Electron.BrowserWindow) {\n\n  // When set to false, the update download will be triggered through the API\n  autoUpdater.autoDownload = false\n  autoUpdater.disableWebInstaller = false\n  autoUpdater.allowDowngrade = false\n\n  // start check\n  autoUpdater.on('checking-for-update', function () { })\n  // update available\n  autoUpdater.on('update-available', (arg) => {\n    win.webContents.send('update-can-available', { update: true, version: app.getVersion(), newVersion: arg?.version })\n  })\n  // update not available\n  autoUpdater.on('update-not-available', (arg) => {\n    win.webContents.send('update-can-available', { update: false, version: app.getVersion(), newVersion: arg?.version })\n  })\n\n  // Checking for updates\n  ipcMain.handle('check-update', async () => {\n    if (!app.isPackaged) {\n      const error = new Error('The update feature is only available after the package.')\n      return { message: error.message, error }\n    }\n\n    try {\n      return await autoUpdater.checkForUpdatesAndNotify()\n    } catch (error) {\n      return { message: 'Network error', error }\n    }\n  })\n\n  // Start downloading and feedback on progress\n  ipcMain.handle('start-download', (event) => {\n    startDownload(\n      (error, progressInfo) => {\n        if (error) {\n          // feedback download error message\n          event.sender.send('update-error', { message: error.message, error })\n        } else {\n          // feedback update progress message\n          event.sender.send('download-progress', progressInfo)\n        }\n      },\n      () => {\n        // feedback update downloaded message\n        event.sender.send('update-downloaded')\n      }\n    )\n  })\n\n  // Install now\n  ipcMain.handle('quit-and-install', () => {\n    autoUpdater.quitAndInstall(false, true)\n  })\n}\n\nfunction startDownload(\n  callback: (error: Error | null, info: ProgressInfo | null) => void,\n  complete: (event: UpdateDownloadedEvent) => void,\n) {\n  autoUpdater.on('download-progress', info => callback(null, info))\n  autoUpdater.on('error', error => callback(error, null))\n  autoUpdater.on('update-downloaded', complete)\n  autoUpdater.downloadUpdate()\n}\n","import { ipcMain } from 'electron';\nimport { ActivityType, Client, GatewayIntentBits, Collection, REST, Routes, Partials, TextChannel, DMChannel, NewsChannel, Snowflake, Webhook } from 'discord.js';\n\nconst intents = { \n    intents: [GatewayIntentBits.Guilds, GatewayIntentBits.GuildMessages, \n    GatewayIntentBits.MessageContent, GatewayIntentBits.GuildEmojisAndStickers, \n    GatewayIntentBits.DirectMessages, GatewayIntentBits.DirectMessageReactions,\n    GatewayIntentBits.GuildMessageTyping, GatewayIntentBits.GuildModeration], \n    partials: [Partials.Channel, Partials.GuildMember, Partials.User, Partials.Reaction, Partials.Message] \n};\ntype ValidStatus = 'online' | 'dnd' | 'idle' | 'invisible';\n\nfunction cleanUsername(username: string) {\n    // Remove leading characters\n    let cleaned = username.replace(/^[._-]+/, '');\n  \n    // Remove trailing characters\n    cleaned = cleaned.replace(/[._-]+$/, '');\n  \n    return cleaned;\n}\n\nfunction cleanEmoji(text: string) {\n    // Remove emoji characters using regex\n    return text.replace(/<:[a-zA-Z0-9_]+:[0-9]+>/g, '');\n}\n\nexport function DiscordJSRoutes(){\n    let disClient = new Client(intents);\n    const commands = new Collection();\n    let isReady = false;\n    let token = '';\n    let applicationID = '';\n\n    ipcMain.on('discord-get-token', async (event) => {\n        event.sender.send('discord-get-token-reply', token);\n    });\n\n    ipcMain.on('discord-get-application-id', async (event) => {\n        event.sender.send('discord-get-application-id-reply', applicationID);\n    });\n\n    ipcMain.on('discord-get-commands', async (event) => {\n        event.sender.send('discord-get-commands-reply', commands);\n    });\n\n    ipcMain.on('discord-get-command', async (event, commandName: string) => {\n        event.sender.send('discord-get-command-reply', commands.get(commandName));\n    });\n\n    ipcMain.on('discord-add-command', async (event, commandName: string, commandFunction: Function) => {\n        commands.set(commandName, commandFunction);\n        event.sender.send('discord-add-command-reply', commands);\n    });\n\n    ipcMain.on('discord-remove-command', async (event, commandName: string) => {\n        commands.delete(commandName);\n        event.sender.send('discord-remove-command-reply', commands);\n    });\n\n    ipcMain.on('discord-remove-all-commands', async (event) => {\n        commands.clear();\n        event.sender.send('discord-remove-all-commands-reply', commands);\n    });\n\n    ipcMain.on('discord-get-guilds', async (event) => {\n        if(!isReady) return false;\n        const guilds = disClient.guilds.cache.map(guild => {\n            const channels = guild.channels.cache\n              .filter(channel => channel.type === 0)\n              .map(channel => ({\n                id: channel.id,\n                name: channel.name,\n              }));\n            return {\n              id: guild.id,\n              name: guild.name,\n              channels,\n            };\n        });\n        event.sender.send('discord-get-guilds-reply', guilds);\n    });\n\n    disClient.on('messageCreate', async (message) => {\n        if (message.author.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message', message);\n    });\n\n    disClient.on('messageUpdate', async (oldMessage, newMessage) => {\n        if (newMessage.author?.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message-update', oldMessage, newMessage);\n    });\n\n    disClient.on('messageDelete', async (message) => {\n        if (message.author?.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message-delete', message);\n    });\n\n    disClient.on('messageReactionAdd', async (reaction, user) => {\n        if (user.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message-reaction-add', reaction, user);\n    });\n\n    disClient.on('messageReactionRemove', async (reaction, user) => {\n        if (user.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message-reaction-remove', reaction, user);\n    });\n\n    disClient.on('messageReactionRemoveAll', async (message) => {\n        if (message.author?.id === disClient.user?.id) return;\n        ipcMain.emit('discord-message-reaction-remove-all', message);\n    });\n\n    disClient.on('messageReactionRemoveEmoji', async (reaction) => {\n        ipcMain.emit('discord-message-reaction-remove-emoji', reaction);\n    });\n\n    disClient.on('channelCreate', async (channel) => {\n        ipcMain.emit('discord-channel-create', channel);\n    });\n\n    disClient.on('channelDelete', async (channel) => {\n        ipcMain.emit('discord-channel-delete', channel);\n    });\n\n    disClient.on('channelPinsUpdate', async (channel, time) => {\n        ipcMain.emit('discord-channel-pins-update', channel, time);\n    });\n\n    disClient.on('channelUpdate', async (oldChannel, newChannel) => {\n        ipcMain.emit('discord-channel-update', oldChannel, newChannel);\n    });\n\n    disClient.on('emojiCreate', async (emoji) => {\n        ipcMain.emit('discord-emoji-create', emoji);\n    });\n\n    disClient.on('emojiDelete', async (emoji) => {\n        ipcMain.emit('discord-emoji-delete', emoji);\n    });\n\n    disClient.on('emojiUpdate', async (oldEmoji, newEmoji) => {\n        ipcMain.emit('discord-emoji-update', oldEmoji, newEmoji);\n    });\n\n    disClient.on('guildBanAdd', async (ban) => {\n        ipcMain.emit('discord-guild-ban-add', ban);\n    });\n\n    disClient.on('guildBanRemove', async (ban) => {\n        ipcMain.emit('discord-guild-ban-remove', ban);\n    });\n\n    disClient.on('guildCreate', async (guild) => {\n        ipcMain.emit('discord-guild-create', guild);\n    });\n\n    disClient.on('guildDelete', async (guild) => {\n        ipcMain.emit('discord-guild-delete', guild);\n    });\n\n    disClient.on('guildUnavailable', async (guild) => {\n        ipcMain.emit('discord-guild-unavailable', guild);\n    });\n\n    disClient.on('guildIntegrationsUpdate', async (guild) => {\n        ipcMain.emit('discord-guild-integrations-update', guild);\n    });\n\n    disClient.on('guildMemberAdd', async (member) => {\n        ipcMain.emit('discord-guild-member-add', member);\n    });\n\n    disClient.on('guildMemberRemove', async (member) => {\n        ipcMain.emit('discord-guild-member-remove', member);\n    });\n\n    disClient.on('guildMemberAvailable', async (member) => {\n        ipcMain.emit('discord-guild-member-available', member);\n    });\n\n    disClient.on('guildMemberUpdate', async (oldMember, newMember) => {\n        ipcMain.emit('discord-guild-member-update', oldMember, newMember);\n    });\n\n    disClient.on('guildMembersChunk', async (members, guild) => {\n        ipcMain.emit('discord-guild-members-chunk', members, guild);\n    });\n\n    disClient.on('guildUpdate', async (oldGuild, newGuild) => {\n        ipcMain.emit('discord-guild-update', oldGuild, newGuild);\n    });\n\n    disClient.on('interactionCreate', async (interaction) => {\n        ipcMain.emit('discord-interaction-create', interaction);\n    });\n\n    disClient.on('inviteCreate', async (invite) => {\n        ipcMain.emit('discord-invite-create', invite);\n    });\n\n    disClient.on('inviteDelete', async (invite) => {\n        ipcMain.emit('discord-invite-delete', invite);\n    });\n\n    disClient.on('presenceUpdate', async (oldPresence, newPresence) => {\n        ipcMain.emit('discord-presence-update', oldPresence, newPresence);\n    });\n\n    disClient.on('ready', () => {\n        if(!disClient.user) return;\n        isReady = true;\n        console.log(`Logged in as ${disClient.user.tag}!`);\n        ipcMain.emit('discord-ready', disClient);\n    });\n\n    async function setDiscordBotInfo(botName: string, base64Avatar: string): Promise<void> {\n        if(!isReady) return;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return;\n        }\n        let newName;\n        let newNameDot;\n        try {\n            await disClient.user.setUsername(botName);\n            console.log(`My new username is ${botName}`);\n        } catch (error) {\n            console.error(`Failed to set username to ${botName}:`, error);\n\n            // If the first attempt fails, add an underscore and try again\n            try {\n                newName = \"_\" + botName;\n                await disClient.user.setUsername(newName);\n                console.log(`My new username is ${newName}`);\n            } catch (error) {\n                console.error(`Failed to set username to ${newName}:`, error);\n    \n                // If the second attempt fails, add a dot and try again\n                try {\n                    newNameDot = \".\" + botName;\n                    await disClient.user.setUsername(newNameDot);\n                    console.log(`My new username is ${newNameDot}`);\n                } catch (error) {\n                    console.error(`Failed to set username to ${newNameDot}:`, error);\n                }\n            }\n        }\n    \n        // Change bot's avatar\n        try {\n            const buffer = Buffer.from(base64Avatar, 'base64');\n            await disClient.user.setAvatar(buffer);\n            console.log('New avatar set!');\n        } catch (error) {\n            console.error('Failed to set avatar:', error);\n        }\n    }\n\n    async function setStatus(message: string, type: string){\n        if(!disClient.user) return;\n        if(!isReady) return;\n    \n        let activityType: ActivityType.Playing | ActivityType.Streaming | ActivityType.Listening | ActivityType.Watching | ActivityType.Competing;\n    \n        switch (type) {\n            case 'Playing':\n                activityType = ActivityType.Playing;\n                break;\n            case 'Watching':\n                activityType = ActivityType.Watching;\n                break;\n            case 'Listening':\n                activityType = ActivityType.Listening;\n                break;\n            case 'Streaming':\n                activityType = ActivityType.Streaming;\n                break;\n            case 'Competing':\n                activityType = ActivityType.Competing;\n                break;\n            default:\n                activityType = ActivityType.Playing;\n                break;\n        }\n    \n        disClient.user.setActivity(`${message}`, {type: activityType});\n    }\n\n    async function setOnlineMode(type: ValidStatus) {\n        if(!disClient.user) return;\n        if(!isReady) return;\n        disClient.user.setStatus(type);\n    }\n    \n    async function sendMessage(channelID: Snowflake, message: string): Promise<void> {\n        if(!isReady) return;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return;\n        }\n        const channel = await disClient.channels.fetch(channelID);\n    \n        // Check if the channel is one of the types that can send messages\n        if (channel instanceof TextChannel || channel instanceof DMChannel || channel instanceof NewsChannel) {\n            channel.send(message);\n        }\n    }\n\n    async function getWebhookForCharacter(charName: string, channelID: Snowflake): Promise<Webhook | undefined> {\n        if(!isReady) return;\n        const channel = disClient.channels.cache.get(channelID);\n    \n        if (!(channel instanceof TextChannel || channel instanceof NewsChannel)) {\n            return undefined;\n        }\n    \n        const webhooks = await channel.fetchWebhooks();\n        return webhooks.find(webhook => webhook.name === charName);\n    }\n    \n    async function sendMessageAsCharacter(charName: string, channelID: Snowflake, message: string): Promise<void> {\n        if(!isReady) return;\n        const webhook = await getWebhookForCharacter(charName, channelID);\n        \n        if (!webhook) {\n            throw new Error(`Webhook for character ${charName} not found.`);\n        }\n    \n        await webhook.send(message);\n    }\n    \n    async function getWebhooksForChannel(channelID: Snowflake): Promise<string[]> {\n        if(!isReady) return [];\n        const channel = disClient.channels.cache.get(channelID);\n    \n        if (!(channel instanceof TextChannel || channel instanceof NewsChannel)) {\n            return [];\n        }\n    \n        const webhooks = await channel.fetchWebhooks();\n        return webhooks.map(webhook => webhook.name);\n    }\n\n    ipcMain.handle('discord-login', async (event, rawToken: string, appId: string) => {\n        await disClient.login(rawToken);\n        token = rawToken;\n        applicationID = appId;\n        return true;\n    });\n\n    ipcMain.handle('discord-logout', async (event) => {\n        await disClient.destroy();\n        disClient.removeAllListeners();\n        isReady = false;\n        disClient = new Client(intents);\n        ipcMain.emit('discord-disconnected');\n        return true;\n    });\n\n    ipcMain.handle('discord-set-bot-info', async (event, botName: string, base64Avatar: string) => {\n        if(!isReady) return false;\n        await setDiscordBotInfo(botName, base64Avatar);\n        return true;\n    });\n\n    ipcMain.handle('discord-set-status', async (event, message: string, type: string) => {\n        if(!isReady) return false;\n        await setStatus(message, type);\n        return true;\n    });\n\n    ipcMain.handle('discord-set-online-mode', async (event, type: ValidStatus) => {\n        if(!isReady) return false;\n        await setOnlineMode(type);\n        return true;\n    });\n\n    ipcMain.handle('discord-send-message', async (event, channelID: Snowflake, message: string) => {\n        if(!isReady) return false;\n        await sendMessage(channelID, message);\n        return true;\n    });\n\n    ipcMain.handle('discord-send-message-as-character', async (event, charName: string, channelID: Snowflake, message: string) => {\n        if(!isReady) return false;\n        await sendMessageAsCharacter(charName, channelID, message);\n        return true;\n    });\n\n    ipcMain.on('discord-get-webhooks-for-channel', async (event, channelID: Snowflake) => {\n        if(!isReady) return false;\n        const webhooks = await getWebhooksForChannel(channelID);\n        event.sender.send('discord-get-webhooks-for-channel-reply', webhooks);\n    });\n\n    ipcMain.on('discord-get-webhook-for-character', async (event, charName: string, channelID: Snowflake) => {\n        if(!isReady) return false;\n        const webhook = await getWebhookForCharacter(charName, channelID);\n        event.sender.send('discord-get-webhook-for-character-reply', webhook);\n    });\n\n    ipcMain.on('discord-get-user', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-reply', disClient.user);\n    });\n\n    ipcMain.on('discord-get-user-id', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-id-reply', disClient.user.id);\n    });\n\n    ipcMain.on('discord-get-user-username', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-username-reply', disClient.user.username);\n    });\n\n    ipcMain.on('discord-get-user-avatar', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-avatar-reply', disClient.user.avatarURL());\n    });\n\n    ipcMain.on('discord-get-user-discriminator', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-discriminator-reply', disClient.user.discriminator);\n    });\n\n    ipcMain.on('discord-get-user-tag', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-tag-reply', disClient.user.tag);\n    });\n\n    ipcMain.on('discord-get-user-createdAt', async (event) => {\n        if(!isReady) return false;\n        if (!disClient.user) {\n            console.error(\"Discord client user is not initialized.\");\n            return false;\n        }\n        event.sender.send('discord-get-user-createdAt-reply', disClient.user.createdAt);\n    });\n\n    ipcMain.on('discord-bot-status', async (event) => {\n        event.sender.send('discord-bot-status-reply', isReady);\n    });\n};","import { ipcMain } from 'electron';\nimport PouchDB from 'pouchdb';\nimport { dataPath } from '../';\n\nexport function PouchDBRoutes(){\n    let agentDB = new PouchDB('agents', {prefix: dataPath});\n    let chatsDB = new PouchDB('chats', {prefix: dataPath});\n    let commandDB = new PouchDB('commands', {prefix: dataPath});\n    let attachmentDB = new PouchDB('attachments', {prefix: dataPath});\n\n\n    ipcMain.on('get-agents', (event, arg) => {\n        agentDB.allDocs({include_docs: true}).then((result) => {\n            event.sender.send('get-agents-reply', result.rows);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('get-agent', (event, arg) => {\n        agentDB.get(arg).then((result) => {\n            event.sender.send('get-agent-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('add-agent', (event, arg) => {\n        agentDB.put(arg).then((result) => {\n            event.sender.send('add-agent-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('update-agent', (event, arg) => {\n        agentDB.get(arg._id).then((doc) => {\n            // Merge existing fields with updated fields and retain _rev\n            let updatedDoc = {...doc, ...arg};\n\n            agentDB.put(updatedDoc).then((result) => {\n                event.sender.send('update-agent-reply', result);\n            }).catch((err) => {\n                console.error('Error while updating document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        }); \n    });\n\n    ipcMain.on('delete-agent', (event, arg) => {\n        agentDB.get(arg).then((doc) => {\n            agentDB.remove(doc).then((result) => {\n                event.sender.send('delete-agent-reply', result);\n            }).catch((err) => {\n                console.error('Error while deleting document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        }); \n    });\n\n    ipcMain.on('get-chats', (event, arg) => {\n        chatsDB.allDocs({include_docs: true}).then((result) => {\n            event.sender.send('get-chats-reply', result.rows);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('get-chat', (event, arg) => {\n        chatsDB.get(arg).then((result) => {\n            event.sender.send('get-chat-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('add-chat', (event, arg) => {\n        chatsDB.put(arg).then((result) => {\n            event.sender.send('add-chat-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('update-chat', (event, arg) => {\n        chatsDB.get(arg._id).then((doc) => {\n            // Merge existing fields with updated fields and retain _rev\n            let updatedDoc = {...doc, ...arg};\n            \n            chatsDB.put(updatedDoc).then((result) => {\n                event.sender.send('update-chat-reply', result);\n            }).catch((err) => {\n                console.error('Error while updating document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n    ipcMain.on('delete-chat', (event, arg) => {\n        chatsDB.get(arg).then((doc) => {\n            chatsDB.remove(doc).then((result) => {\n                event.sender.send('delete-chat-reply', result);\n            }).catch((err) => {\n                console.error('Error while deleting document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n    ipcMain.on('get-commands', (event, arg) => {\n        commandDB.allDocs({include_docs: true}).then((result) => {\n            event.sender.send('get-commands-reply', result.rows);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('get-command', (event, arg) => {\n        commandDB.get(arg).then((result) => {\n            event.sender.send('get-command-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('add-command', (event, arg) => {\n        commandDB.put(arg).then((result) => {\n            event.sender.send('add-command-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('update-command', (event, arg) => {\n        commandDB.get(arg._id).then((doc) => {\n            // Merge existing fields with updated fields and retain _rev\n            let updatedDoc = {...doc, ...arg};\n\n            commandDB.put(updatedDoc).then((result) => {\n                event.sender.send('update-command-reply', result);\n            }).catch((err) => {\n                console.error('Error while updating document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n    ipcMain.on('delete-command', (event, arg) => {\n        commandDB.get(arg).then((doc) => {\n            commandDB.remove(doc).then((result) => {\n                event.sender.send('delete-command-reply', result);\n            }).catch((err) => {\n                console.error('Error while deleting document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n    ipcMain.on('get-attachments', (event, arg) => {\n        attachmentDB.allDocs({include_docs: true}).then((result) => {\n            event.sender.send('get-attachments-reply', result.rows);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('get-attachment', (event, arg) => {\n        attachmentDB.get(arg).then((result) => {\n            event.sender.send('get-attachment-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('add-attachment', (event, arg) => {\n        attachmentDB.put(arg).then((result) => {\n            event.sender.send('add-attachment-reply', result);\n        }).catch((err) => {\n            console.log(err);\n        });\n    });\n\n    ipcMain.on('update-attachment', (event, arg) => {\n        attachmentDB.get(arg._id).then((doc) => {\n            // Merge existing fields with updated fields and retain _rev\n            let updatedDoc = {...doc, ...arg};\n\n            attachmentDB.put(updatedDoc).then((result) => {\n                event.sender.send('update-attachment-reply', result);\n            }).catch((err) => {\n                console.error('Error while updating document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n    ipcMain.on('delete-attachment', (event, arg) => {\n        attachmentDB.get(arg).then((doc) => {\n            attachmentDB.remove(doc).then((result) => {\n                event.sender.send('delete-attachment-reply', result);\n            }).catch((err) => {\n                console.error('Error while deleting document: ', err);\n            });\n        }).catch((err) => {\n            console.error('Error while getting document: ', err);\n        });\n    });\n\n\n    ipcMain.on('clear-data', (event, arg) => {\n        agentDB.destroy();\n        chatsDB.destroy();\n        commandDB.destroy();\n        attachmentDB.destroy();\n        createDBs();\n    });\n\n    function createDBs (){\n        agentDB = new PouchDB('agents', {prefix: dataPath});\n        chatsDB = new PouchDB('chats', {prefix: dataPath});\n        commandDB = new PouchDB('commands', {prefix: dataPath});\n        attachmentDB = new PouchDB('attachments', {prefix: dataPath});\n    }\n\n    return {\n        agentDB,\n        chatsDB,\n        commandDB,\n        attachmentDB,\n    }\n};","import { ipcMain } from 'electron';\nimport fs from 'fs';\n\nexport function FsAPIRoutes() {\n    // Read a file asynchronously\n    ipcMain.handle('read-file', async (event, filePath: string) => {\n        try {\n            const data = await fs.promises.readFile(filePath, 'utf8');\n            return data;\n        } catch (err) {\n            console.error(`Error reading file at ${filePath}:`, err);\n            throw err;\n        }\n    });\n\n    // Write to a file asynchronously\n    ipcMain.handle('write-file', async (event, filePath: string, data: string) => {\n        try {\n            await fs.promises.writeFile(filePath, data, 'utf8');\n            return { success: true };\n        } catch (err) {\n            console.error(`Error writing to file at ${filePath}:`, err);\n            throw err;\n        }\n    });\n\n    // Create a directory asynchronously\n    ipcMain.handle('mkdir', async (event, dirPath: string) => {\n        try {\n            await fs.promises.mkdir(dirPath, { recursive: true }); // Recursive to ensure parent directories are created\n            return { success: true };\n        } catch (err) {\n            console.error(`Error creating directory at ${dirPath}:`, err);\n            throw err;\n        }\n    });\n\n    // Read the contents of a directory asynchronously\n    ipcMain.handle('readdir', async (event, dirPath: string) => {\n        try {\n            const files = await fs.promises.readdir(dirPath);\n            return files;\n        } catch (err) {\n            console.error(`Error reading directory at ${dirPath}:`, err);\n            throw err;\n        }\n    });\n\n    // Rename a file or directory\n    ipcMain.handle('rename', async (event, oldPath: string, newPath: string) => {\n        try {\n            await fs.promises.rename(oldPath, newPath);\n            return { success: true };\n        } catch (err) {\n            console.error(`Error renaming from ${oldPath} to ${newPath}:`, err);\n            throw err;\n        }\n    });\n\n    // Remove a file\n    ipcMain.handle('unlink', async (event, filePath: string) => {\n        try {\n            await fs.promises.unlink(filePath);\n            return { success: true };\n        } catch (err) {\n            console.error(`Error removing file at ${filePath}:`, err);\n            throw err;\n        }\n    });\n\n    // Check if a file or directory exists\n    ipcMain.handle('exists', (event, path: string) => {\n        return fs.existsSync(path);  // Using synchronous version directly as it's a simple check\n    });\n\n    // Get information about a file or directory\n    ipcMain.handle('stat', async (event, filePath: string) => {\n        try {\n            const stats = await fs.promises.stat(filePath);\n            return stats;\n        } catch (err) {\n            console.error(`Error getting stats for file at ${filePath}:`, err);\n            throw err;\n        }\n    });\n\n    // Copy a file\n    ipcMain.handle('copy-file', async (event, src: string, dest: string, flags?: number) => {\n        try {\n            await fs.promises.copyFile(src, dest, flags);\n            return { success: true };\n        } catch (err) {\n            console.error(`Error copying file from ${src} to ${dest}:`, err);\n            throw err;\n        }\n    });\n\n    // Open a file\n    ipcMain.handle('open-file', async (event, path: string, flags: string, mode?: number) => {\n        try {\n        const fd = await fs.promises.open(path, flags, mode);\n        return fd.fd;  // Return the file descriptor number\n        } catch (err) {\n        console.error(`Error opening file at ${path}:`, err);\n        throw err;\n        }\n    });\n}","import { app, BrowserWindow, shell, ipcMain } from 'electron'\nimport { release } from 'node:os'\nimport { join } from 'node:path'\nimport path from 'path';\nimport { update } from './update'\nimport { DiscordJSRoutes } from './api/discord'\nimport { PouchDBRoutes } from './api/pouchdb'\nimport Store from 'electron-store';\nimport { FsAPIRoutes } from './api/fsapi';\n\n// The built directory structure\n//\n// ├─┬ dist-electron\n// │ ├─┬ main\n// │ │ └── index.js    > Electron-Main\n// │ └─┬ preload\n// │   └── index.js    > Preload-Scripts\n// ├─┬ dist\n// │ └── index.html    > Electron-Renderer\n//\nprocess.env.DIST_ELECTRON = join(__dirname, '../')\nprocess.env.DIST = join(process.env.DIST_ELECTRON, '../dist')\nprocess.env.VITE_PUBLIC = process.env.VITE_DEV_SERVER_URL\n  ? join(process.env.DIST_ELECTRON, '../public')\n  : process.env.DIST\n\n// Disable GPU Acceleration for Windows 7\nif (release().startsWith('6.1')) app.disableHardwareAcceleration()\n\n// Set application name for Windows 10+ notifications\nif (process.platform === 'win32') app.setAppUserModelId(app.getName())\n\nif (!app.requestSingleInstanceLock()) {\n  app.quit()\n  process.exit(0)\n}\n\n// Remove electron security warnings\n// This warning only shows in development mode\n// Read more on https://www.electronjs.org/docs/latest/tutorial/security\nprocess.env['ELECTRON_DISABLE_SECURITY_WARNINGS'] = 'true'\n\nlet win: BrowserWindow | null = null\n// Here, you can also use other preload\nconst preload = join(__dirname, '../preload/index.js')\nconst url = process.env.VITE_DEV_SERVER_URL\nconst indexHtml = join(process.env.DIST, 'index.html')\nexport const dataPath = path.join(app.getPath('userData'), 'data/');\nexport const store = new Store();\nasync function createWindow() {\n  win = new BrowserWindow({\n    title: 'Main window',\n    icon: join(process.env.VITE_PUBLIC, 'favicon.ico'),\n    webPreferences: {\n      preload,\n      nodeIntegration: true,\n      contextIsolation: false,\n      webSecurity: false,\n    },\n    fullscreenable: true,\n    frame: true,\n    transparent: false,\n    autoHideMenuBar: true,\n    resizable: true,\n    maximizable: true,\n    minimizable: false,\n  })\n\n  if (url) { // electron-vite-vue#298\n    win.loadURL(url)\n    // Open devTool if the app is not packaged\n    win.webContents.openDevTools()\n  } else {\n    win.loadFile(indexHtml)\n  }\n\n  // Test actively push message to the Electron-Renderer\n  win.webContents.on('did-finish-load', () => {\n    win?.webContents.send('main-process-message', new Date().toLocaleString())\n  })\n\n  // Make all links open with the browser, not with the application\n  win.webContents.setWindowOpenHandler(({ url }) => {\n    if (url.startsWith('https:')) shell.openExternal(url)\n    return { action: 'deny' }\n  })\n\n  // Apply electron-updater\n  update(win)\n}\n\napp.whenReady().then(createWindow)\n\napp.on('window-all-closed', () => {\n  win = null\n  if (process.platform !== 'darwin') app.quit()\n})\n\napp.on('second-instance', () => {\n  if (win) {\n    // Focus on the main window if the user tried to open another\n    if (win.isMinimized()) win.restore()\n    win.focus()\n  }\n})\n\napp.on('activate', () => {\n  const allWindows = BrowserWindow.getAllWindows()\n  if (allWindows.length) {\n    allWindows[0].focus()\n  } else {\n    createWindow()\n  }\n})\n\n// New window example arg: new windows url\nipcMain.handle('open-win', (_, arg) => {\n  const childWindow = new BrowserWindow({\n    webPreferences: {\n      preload,\n      nodeIntegration: true,\n      contextIsolation: false,\n    },\n  })\n\n  if (process.env.VITE_DEV_SERVER_URL) {\n    childWindow.loadURL(`${url}#${arg}`)\n  } else {\n    childWindow.loadFile(indexHtml, { hash: arg })\n  }\n})\n\nipcMain.handle('get-data-path', () => {\n  return dataPath;\n})\n\nipcMain.on('set-data', (event, arg) => {\n  store.set(arg.key, arg.value);\n})\n\nipcMain.on('get-data', (event, arg) => {\n  event.sender.send('get-data-reply', store.get(arg));\n})\n\nDiscordJSRoutes();\nPouchDBRoutes();\nFsAPIRoutes();"],"names":["win","autoUpdater","app","ipcMain","GatewayIntentBits","Partials","Client","Collection","error","ActivityType","TextChannel","DMChannel","NewsChannel","path","join","release","BrowserWindow","url","shell"],"mappings":"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"}